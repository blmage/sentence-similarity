function r(r,n){(null==n||n>r.length)&&(n=r.length);for(var e=0,t=new Array(n);e<n;e++)t[e]=r[e];return t}function n(n,e){var t;if("undefined"==typeof Symbol||null==n[Symbol.iterator]){if(Array.isArray(n)||(t=function(n,e){if(n){if("string"==typeof n)return r(n,void 0);var t=Object.prototype.toString.call(n).slice(8,-1);return"Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t?Array.from(n):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?r(n,void 0):void 0}}(n))||e&&n&&"number"==typeof n.length){t&&(n=t);var a=0;return function(){return a>=n.length?{done:!0}:{done:!1,value:n[a++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(t=n[Symbol.iterator]()).next.bind(t)}export default function(r,e,t){var a=r.map(function(r,n){var e,t=(e=function(r){return Array.isArray(r)&&r.length>1},r.reduce(function(r,n){return r[e(n)?0:1].push(n),r},[[],[]])),a=t[0],o=t[1];return 0===a.length?null:{index:n,choices:a.map(function(r){return r.map(function(r){return[r]})}).concat([[o]]).filter(function(r){return r.every(function(r){return r.length>0})})}}).filter(Boolean).reverse(),o=a.reduce(function(r,n){return r.splice(n.index,1),r},[].concat(r));return a.reduce(function(r,n,e){return r.flatMap(function(r){return n.choices.map(function(t){var o=n.index-a.length+e+1,u=[].concat(r);return u.splice.apply(u,[o,0].concat(t)),u})})},[o]).reduce(function(r,a){return 1===r?r:Math.max(r,function(r,e,t){var a=function(r){for(var e=[],t=new Set,a=new Set,o=0;o<r[0].length;o++)e.push({patternIndex:o,stringIndex:-1,score:0}),t.add(o);for(var u=0;u<r.length;u++)a.add(u);for(var i=!0;i&&t.size&&a.size;){i=!1;for(var c,f=n(t);!(c=f()).done;){var l=c.value;if(0===a.size)break;for(var d,v=-1,h=0,s=n(a);!(d=s()).done;){var p=d.value,g=r[p][l];g>h&&(h=g,v=p)}var m=-1,y=0;if(v>=0)for(var x,b=n(t);!(x=b()).done;){var I=x.value,A=r[v][I];A>y&&(y=A,m=I)}m===l&&(e[m]={patternIndex:l,stringIndex:v,score:y},i=!0,m>=0&&t.delete(m),v>=0&&a.delete(v))}}return e}(function(r,n,e){for(var t=[],a=0;a<n.length;a++){t.push([]);for(var o=function(o){var u=n[a],i=r[o].map(function(r){return e(r,u)}),c=Math.max.apply(Math,i);t[a].push(c)},u=0;u<r.length;u++)o(u)}return t}(r,e,t));return 1/e.length*a.reduce(function(r,n){return r+n.score},0)*function(r,n){var e=0,t=0;if(r.forEach(function(r){var n=r.patternIndex;n>=0&&(t++,e+=n-r.stringIndex)}),0===t)return 0;e/=t;var a=0,o=Math.max(r.length,n);return r.forEach(function(r){var n=r.patternIndex;n>=0&&(a+=1-Math.abs(n-r.stringIndex-e)/o)}),(a/t-.5)/.5}(a,e.length)}(a,e,t))},0)}
//# sourceMappingURL=index.module.js.map
